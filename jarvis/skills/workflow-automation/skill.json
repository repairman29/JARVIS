{
  "name": "workflow-automation",
  "version": "1.0.0",
  "description": "AI-powered workflow automation and command chaining for intelligent task orchestration",
  "env": ["JARVIS_WORKFLOW_MAX_CHAINS", "JARVIS_WORKFLOW_TIMEOUT", "JARVIS_WORKFLOW_LEARNING_ENABLED"],
  "tools": [
    {
      "name": "create_workflow",
      "description": "Create a reusable workflow from natural language description or command sequence",
      "parameters": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Workflow name (e.g., 'morning_routine', 'project_setup', 'end_of_day')"
          },
          "description": {
            "type": "string",
            "description": "Natural language description of what the workflow does"
          },
          "steps": {
            "type": "array",
            "description": "Array of workflow steps with commands and conditions",
            "items": {
              "type": "object",
              "properties": {
                "name": {"type": "string"},
                "action": {"type": "string"},
                "skill": {"type": "string"},
                "tool": {"type": "string"},
                "parameters": {"type": "object"},
                "condition": {"type": "string"},
                "onSuccess": {"type": "string"},
                "onFailure": {"type": "string"},
                "timeout": {"type": "number"},
                "parallel": {"type": "boolean"}
              },
              "required": ["name", "action"]
            }
          },
          "triggers": {
            "type": "array",
            "description": "Conditions that trigger this workflow",
            "items": {
              "type": "object",
              "properties": {
                "type": {"type": "string", "enum": ["time", "event", "condition", "manual"]},
                "value": {"type": "string"},
                "enabled": {"type": "boolean"}
              }
            }
          },
          "variables": {
            "type": "object",
            "description": "Workflow variables with default values",
            "additionalProperties": {"type": "string"}
          },
          "category": {
            "type": "string",
            "description": "Workflow category for organization",
            "enum": ["productivity", "development", "communication", "system", "personal", "custom"]
          },
          "tags": {
            "type": "array",
            "description": "Tags for workflow discovery",
            "items": {"type": "string"}
          }
        },
        "required": ["name", "description", "steps"]
      }
    },
    {
      "name": "execute_workflow",
      "description": "Execute a saved workflow or create and run an ad-hoc workflow",
      "parameters": {
        "type": "object",
        "properties": {
          "workflowName": {
            "type": "string",
            "description": "Name of saved workflow to execute"
          },
          "steps": {
            "type": "array",
            "description": "Ad-hoc workflow steps (if not using saved workflow)",
            "items": {
              "type": "object",
              "properties": {
                "action": {"type": "string"},
                "skill": {"type": "string"},
                "tool": {"type": "string"},
                "parameters": {"type": "object"}
              }
            }
          },
          "variables": {
            "type": "object",
            "description": "Variable values for this execution",
            "additionalProperties": {"type": "string"}
          },
          "dryRun": {
            "type": "boolean",
            "description": "Preview workflow without executing",
            "default": false
          },
          "continueOnError": {
            "type": "boolean",
            "description": "Continue executing subsequent steps even if one fails",
            "default": false
          },
          "parallel": {
            "type": "boolean",
            "description": "Execute compatible steps in parallel",
            "default": false
          }
        }
      }
    },
    {
      "name": "chain_commands",
      "description": "Chain multiple commands with intelligent context passing and error handling",
      "parameters": {
        "type": "object",
        "properties": {
          "commands": {
            "type": "array",
            "description": "Commands to chain together",
            "items": {
              "type": "object",
              "properties": {
                "description": {"type": "string", "description": "Natural language command description"},
                "skill": {"type": "string", "description": "Target skill name"},
                "tool": {"type": "string", "description": "Specific tool to use"},
                "parameters": {"type": "object", "description": "Tool parameters"},
                "passContext": {"type": "boolean", "description": "Pass results to next command"},
                "contextMapping": {"type": "object", "description": "How to map context to next command"},
                "condition": {"type": "string", "description": "Condition for executing this command"}
              },
              "required": ["description"]
            }
          },
          "context": {
            "type": "object",
            "description": "Initial context variables",
            "additionalProperties": true
          },
          "stopOnError": {
            "type": "boolean",
            "description": "Stop execution if any command fails",
            "default": true
          },
          "returnAllResults": {
            "type": "boolean",
            "description": "Return results from all commands",
            "default": false
          }
        },
        "required": ["commands"]
      }
    },
    {
      "name": "workflow_conditions",
      "description": "Create conditional logic for workflows (if/then/else, loops, switches)",
      "parameters": {
        "type": "object",
        "properties": {
          "conditionType": {
            "type": "string",
            "description": "Type of conditional logic",
            "enum": ["if_then_else", "switch", "loop", "while", "for_each"]
          },
          "condition": {
            "type": "string",
            "description": "Condition to evaluate (JavaScript-like syntax)"
          },
          "thenSteps": {
            "type": "array",
            "description": "Steps to execute if condition is true",
            "items": {"type": "object"}
          },
          "elseSteps": {
            "type": "array",
            "description": "Steps to execute if condition is false",
            "items": {"type": "object"}
          },
          "loopData": {
            "type": "array",
            "description": "Data to iterate over for loops"
          },
          "maxIterations": {
            "type": "number",
            "description": "Maximum loop iterations for safety",
            "default": 100
          }
        },
        "required": ["conditionType"]
      }
    },
    {
      "name": "schedule_workflow",
      "description": "Schedule workflows for execution at specific times or intervals",
      "parameters": {
        "type": "object",
        "properties": {
          "workflowName": {
            "type": "string",
            "description": "Name of workflow to schedule"
          },
          "scheduleType": {
            "type": "string",
            "description": "Type of schedule",
            "enum": ["once", "daily", "weekly", "monthly", "interval", "cron"]
          },
          "scheduleTime": {
            "type": "string",
            "description": "When to run (time, date, or cron expression)"
          },
          "timezone": {
            "type": "string",
            "description": "Timezone for schedule (default system timezone)"
          },
          "enabled": {
            "type": "boolean",
            "description": "Whether schedule is active",
            "default": true
          },
          "maxRuns": {
            "type": "number",
            "description": "Maximum number of executions (optional)"
          },
          "variables": {
            "type": "object",
            "description": "Variables to pass to scheduled workflow"
          }
        },
        "required": ["workflowName", "scheduleType", "scheduleTime"]
      }
    },
    {
      "name": "workflow_templates",
      "description": "Access or create workflow templates for common automation patterns",
      "parameters": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "description": "Template action",
            "enum": ["list", "get", "create", "install", "customize"]
          },
          "templateName": {
            "type": "string",
            "description": "Name of template to get or create"
          },
          "category": {
            "type": "string",
            "description": "Template category filter",
            "enum": ["productivity", "development", "system", "communication", "entertainment", "all"]
          },
          "customization": {
            "type": "object",
            "description": "Customization parameters for template",
            "additionalProperties": true
          }
        },
        "required": ["action"]
      }
    },
    {
      "name": "learn_patterns",
      "description": "Learn from user behavior to suggest workflow automation opportunities",
      "parameters": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "description": "Learning action",
            "enum": ["analyze", "suggest", "train", "export_insights", "reset_learning"]
          },
          "timeframe": {
            "type": "string",
            "description": "Time period to analyze",
            "enum": ["day", "week", "month", "all"],
            "default": "week"
          },
          "minOccurrences": {
            "type": "number",
            "description": "Minimum occurrences to suggest automation",
            "default": 3
          },
          "includeApps": {
            "type": "boolean",
            "description": "Include app usage patterns",
            "default": true
          }
        },
        "required": ["action"]
      }
    },
    {
      "name": "optimize_workflow",
      "description": "Use AI to analyze and optimize existing workflows for better performance",
      "parameters": {
        "type": "object",
        "properties": {
          "workflowName": {
            "type": "string",
            "description": "Name of workflow to optimize"
          },
          "optimizationGoals": {
            "type": "array",
            "description": "Optimization objectives",
            "items": {
              "type": "string",
              "enum": ["speed", "reliability", "resource_usage", "user_experience", "maintainability"]
            }
          },
          "constraints": {
            "type": "object",
            "description": "Optimization constraints",
            "properties": {
              "maxExecutionTime": {"type": "number"},
              "preserveOrder": {"type": "boolean"},
              "requiredSteps": {"type": "array"}
            }
          },
          "applyOptimizations": {
            "type": "boolean",
            "description": "Apply optimizations immediately or just suggest",
            "default": false
          }
        },
        "required": ["workflowName"]
      }
    },
    {
      "name": "workflow_variables",
      "description": "Manage workflow variables, context passing, and data transformation",
      "parameters": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "description": "Variable operation",
            "enum": ["set", "get", "transform", "clear", "list", "validate"]
          },
          "variableName": {
            "type": "string",
            "description": "Name of variable to operate on"
          },
          "value": {
            "type": "string",
            "description": "Variable value"
          },
          "transformation": {
            "type": "object",
            "description": "Data transformation rules",
            "properties": {
              "type": {"type": "string", "enum": ["format", "filter", "map", "reduce", "validate"]},
              "rules": {"type": "object"}
            }
          },
          "scope": {
            "type": "string",
            "description": "Variable scope",
            "enum": ["global", "workflow", "session", "step"]
          }
        },
        "required": ["action"]
      }
    },
    {
      "name": "workflow_history",
      "description": "Track, analyze, and manage workflow execution history",
      "parameters": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "description": "History action",
            "enum": ["list", "get", "analyze", "export", "clear", "restore"]
          },
          "workflowName": {
            "type": "string",
            "description": "Filter by workflow name"
          },
          "timeframe": {
            "type": "string",
            "description": "Time period filter",
            "enum": ["hour", "day", "week", "month", "all"]
          },
          "status": {
            "type": "string",
            "description": "Filter by execution status",
            "enum": ["success", "failed", "partial", "cancelled", "all"]
          },
          "limit": {
            "type": "number",
            "description": "Maximum records to return",
            "default": 50
          },
          "includeDetails": {
            "type": "boolean",
            "description": "Include detailed execution logs",
            "default": false
          }
        },
        "required": ["action"]
      }
    },
    {
      "name": "workflow_sharing",
      "description": "Import, export, and share workflows with the community",
      "parameters": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "description": "Sharing action",
            "enum": ["export", "import", "publish", "download", "fork", "validate"]
          },
          "workflowName": {
            "type": "string",
            "description": "Name of workflow to share or import"
          },
          "filePath": {
            "type": "string",
            "description": "Path for export/import file"
          },
          "format": {
            "type": "string",
            "description": "Export format",
            "enum": ["json", "yaml", "markdown", "executable"],
            "default": "json"
          },
          "includeHistory": {
            "type": "boolean",
            "description": "Include execution history in export",
            "default": false
          },
          "validateOnly": {
            "type": "boolean",
            "description": "Only validate workflow without importing",
            "default": false
          }
        },
        "required": ["action"]
      }
    },
    {
      "name": "ai_suggestions",
      "description": "Get AI-powered workflow suggestions based on context, goals, and patterns",
      "parameters": {
        "type": "object",
        "properties": {
          "goal": {
            "type": "string",
            "description": "What you want to accomplish (natural language)"
          },
          "context": {
            "type": "object",
            "description": "Current context (apps, files, time, etc.)",
            "properties": {
              "currentApp": {"type": "string"},
              "openFiles": {"type": "array"},
              "timeOfDay": {"type": "string"},
              "dayOfWeek": {"type": "string"}
            }
          },
          "constraints": {
            "type": "object",
            "description": "Constraints or preferences",
            "properties": {
              "maxSteps": {"type": "number"},
              "preferredSkills": {"type": "array"},
              "excludeSkills": {"type": "array"},
              "timeLimit": {"type": "number"}
            }
          },
          "suggestionType": {
            "type": "string",
            "description": "Type of suggestions to provide",
            "enum": ["workflow", "optimization", "automation", "templates", "all"],
            "default": "all"
          },
          "learningMode": {
            "type": "boolean",
            "description": "Use learned patterns for suggestions",
            "default": true
          }
        },
        "required": ["goal"]
      }
    },
    {
      "name": "workflow_debugging",
      "description": "Debug workflow execution issues and provide diagnostic information",
      "parameters": {
        "type": "object",
        "properties": {
          "workflowName": {
            "type": "string",
            "description": "Name of workflow to debug"
          },
          "executionId": {
            "type": "string",
            "description": "Specific execution to analyze"
          },
          "debugLevel": {
            "type": "string",
            "description": "Level of debugging detail",
            "enum": ["basic", "detailed", "verbose"],
            "default": "detailed"
          },
          "focusArea": {
            "type": "string",
            "description": "Area to focus debugging on",
            "enum": ["performance", "errors", "data_flow", "conditions", "all"]
          },
          "provideFixes": {
            "type": "boolean",
            "description": "Provide suggested fixes for issues",
            "default": true
          }
        },
        "required": ["workflowName"]
      }
    }
  ]
}