{
  "name": "kroger",
  "version": "1.0.0",
  "description": "Kroger/King Soopers grocery: search products, check prices, find stores, build shopping lists",
  "env": ["KROGER_CLIENT_ID", "KROGER_CLIENT_SECRET", "KROGER_LOCATION_ID", "KROGER_REFRESH_TOKEN"],
  "tools": [
    {
      "name": "kroger_search",
      "description": "Search Kroger products by term. Returns product names, brands, prices, and product links (if locationId is set).",
      "parameters": {
        "type": "object",
        "properties": {
          "term": { "type": "string", "description": "Search term (e.g. milk, eggs, tortillas)" },
          "limit": { "type": "number", "description": "Max results (default 10)", "default": 10 },
          "fulfillment": { "type": "string", "description": "Filter: curbside (csp) or delivery", "enum": ["curbside", "csp", "delivery"] }
        },
        "required": ["term"]
      }
    },
    {
      "name": "kroger_stores",
      "description": "Find Kroger/King Soopers stores near a zip code.",
      "parameters": {
        "type": "object",
        "properties": {
          "zipCode": { "type": "string", "description": "ZIP code to search near" },
          "radiusInMiles": { "type": "number", "description": "Search radius in miles (default 10)", "default": 10 }
        },
        "required": ["zipCode"]
      }
    },
    {
      "name": "kroger_shop",
      "description": "Build a shopping list: search multiple items, return names, prices, total, product links, and order summary. Items can be strings or { term, quantity } for quantities.",
      "parameters": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "description": "Product terms (strings) or { term: string, quantity: number } (e.g. [\"milk\", \"eggs\", { \"term\": \"bread\", \"quantity\": 2 }])"
          },
          "fulfillment": { "type": "string", "description": "Filter to curbside or delivery only", "enum": ["curbside", "csp", "delivery"] }
        },
        "required": ["items"]
      }
    },
    {
      "name": "kroger_cart",
      "description": "Return the Kroger cart URL so the user can open their cart in the browser.",
      "parameters": { "type": "object", "properties": {} }
    },
    {
      "name": "kroger_add_to_cart",
      "description": "Add items to the user's Kroger cart by UPC. Requires KROGER_REFRESH_TOKEN (run oauth-helper.js once).",
      "parameters": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "description": "Array of { upc or productId, quantity?, modality? }. modality: PICKUP, DELIVERY, or SHIP."
          },
          "modality": { "type": "string", "description": "Default PICKUP (curbside), or DELIVERY, SHIP", "enum": ["PICKUP", "DELIVERY", "SHIP"] }
        },
        "required": ["items"]
      }
    },
    {
      "name": "kroger_shop_and_add",
      "description": "Build a shopping list (search by terms) and add those items to the user's Kroger cart. If needsAuth is returned, tell user to run: node skills/kroger/kroger-auth.js",
      "parameters": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "description": "Product terms (strings) or { term, quantity }. Same as kroger_shop."
          },
          "fulfillment": { "type": "string", "enum": ["curbside", "csp", "delivery"] },
          "modality": { "type": "string", "description": "Cart modality: PICKUP, DELIVERY, SHIP", "enum": ["PICKUP", "DELIVERY", "SHIP"] }
        },
        "required": ["items"]
      }
    },
    {
      "name": "kroger_status",
      "description": "Check if Kroger integration is working. Returns searchWorking (for product search) and cartWorking (for add-to-cart). If cartWorking is false, user needs to run: node skills/kroger/kroger-auth.js",
      "parameters": { "type": "object", "properties": {} }
    }
  ]
}
